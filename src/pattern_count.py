__author__ = 'nikita_kartashov'

from algo_primitives.z_function import z_function


def pattern_count(text, pattern):
    patterned_text = pattern + "|" + text
    zfunction_result = z_function(patterned_text)

    def mapper(i):
        return 1 if i == len(pattern) else 0

    return sum(map(mapper, zfunction_result))


if __name__ == '__main__':
    TEXT = 'AAAAGCACTAAGCACTCCGCAGTGAAAAGCACTAAAGCACTTTTAAAGCACTGAAGCACTCGCAAGCACTATATCCAAGCACTTTAAAGCACTAAAGCACTTGCAAGCACTAAGCACTTCATCTCCAATGGAAGCACTAAGCACTCTAGAAGCACTAAGCACTTATAAAGCACTTAAGCACTCAAGCACTGAAGCACTTAAGCACTAAAGCACTAAGCACTGAAGCACTAACAAAGCACTTCAAAGCACTAGTAAGCACTGAAGCACTAGAAGCACTCGCCAAGATTTCCAACGAAGCACTCCGCTTAAGCACTTAAGCACTGGAAGCACTAAGCACTAAGCACTGAAGCACTCACGCAAGCACTAAGCACTGCAAGCACTGGAAGCACTCCAATTAAGCACTAAGCACTCCAAGCACTAAGCACTCAGAAAGCACTTAAGCACTTTTGAAAGCACTACTTAAGCACTTGTAAGCACTTATAAGCACTCTATAAGCACTAAGCACTATACAAGGAAAGCACTGAAAACACCAAGCACTTCTTAAGCACTAAGCACTGGCAAGCACTGAAGCACTAAAAGCACTGACAAGCACTTAAGCACTAAGCACTAAACAGAAGCACTCTTATAAGCACTTAAGCACTGAAGCACTAAGCACTAAGCACTTGATCCCTAAAGCACTAGCAAGCACTTGGGGGGGTCCTTCATGCAAGCACTAAGCACTGTTAAGCACTTGGAAGCACTGGCGCCTGTAAGCACTAAGCACTGTTGAAGCACTCAAAGCACTAAAGCACTTTCAAGCACTAAGCACTGGACCAAGCACTCAAGTCACCAAAGCACTAAGCACTCGAAGCACTCTGCAAGCACTTCCGTGGATGCAAGCACTGTCGAAGCACTTCAAGCACTATCTCAAGCACTACCGAAGCACTTTCAAGCACTTCAAGCACTTAAGCACTCCTCGTAAGCACTAAAAGCACTAAGCACTAAGCACTCATAAGCACTAAGCACTTAGAAAGCACTAAAGCACTCCAACTGAACCG'
    PATTERN = 'AAGCACTAA'

    print(pattern_count(TEXT, PATTERN))
